{% extends "layout.html" %}
{% block title %}Welcome{% endblock %}
{% block content %}
  <h1>PbNotify: The Pebble Notification API</h1>
  <p>PbNotify is a Remote Pebble Notification API that provides a public-facing bridge between the Internet and local notifications on your Pebble. With one simple request, any webapp or server can now send notifications straight to your wrist. One popular use is to be notified when a long-running command on a remote server completes, with information like exit status easily displayed on your watch, but this is only one example of the many uses for PbNotify.</p>
  <br />
  <p style="color:red;">{{ error }}</p>
  <p>PbNotify is a subscrption service. The fee is a flat rate of $5 a month for unlimited use.</p>
  <br />
	<div>
		<form action="{{ url_for('stripe_login') }}" method="POST">
		  <script
		    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
		    data-key="pk_live_hLVwTAt87sSIU7VUIh5ofdzm"
		    data-amount="500"
		    data-name="PbNotify"
		    data-description="Monthly Subscription Fee">
		  </script>
		</form>
		 <br /><input type="text" class="lineput params" id="promo">
		   <script type="text/javascript">
			  $("#promo").blur(function(){
			  	if($("#promo").val() == ""){
			  		$("#promo").css("background","none");
			  		return;
			  	}
			  	$.post("/login/stripe/promo/" + $("#promo").val(), function(data) {
				  if(JSON.parse(data).valid == "true"){
				  	$("#promo").css("background-color","#3ceb6f");
				  	document.location = "/login/stripe/promo/" + $("#promo").val();
				  }
				  else{
				  	$("#promo").css("background-color","#eb593c");
				  }
				});
			  });
		  </script>	
	</div>
{% endblock %}